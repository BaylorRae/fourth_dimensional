<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>RDoc::RDoc</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>


    <meta property="og:title" value="RDoc::RDoc">

  
    
    <meta name="description" content="This is the driver for generating RDoc output.  It handles file parsing and generation of output.  To use this class to generate RDoc output via the API, the recommended way is:  rdoc = RDoc::RDoc.">
    <meta property="og:description" content="This is the driver for generating RDoc output.  It handles file parsing and generation of output.  To use this class to generate RDoc output via the API, the recommended way is:  rdoc = RDoc::RDoc.">
  

    <meta name="keywords" content="RDoc::RDoc class">
  
    <meta name="keywords" content="add_generator, current, current=, new, error, gather_files, handle_pipe, install_siginfo_handler, load_options, setup_output_dir, store=, update_output_dir, output_flag_file, parse_dot_doc_file, normalized_file_list, list_files_in_directory, parse_file, parse_files, remove_unparseable, document, generate, remove_siginfo_handler">
  
</head>

<body>
    <div class="banner">
        
        <h1>
            <span class="type">Class</span>
            RDoc::RDoc
            
                <span class="parent">&lt;
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/vendor/bundle/ruby/2_6_0/gems/rdoc-6_1_1/lib/rdoc/rdoc_rb.html">vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb</a></li>
            
            <li><a href="../../files/vendor/bundle/ruby/2_6_0/gems/rdoc-6_1_1/lib/rdoc/text_rb.html">vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/text.rb</a></li>
            
            <li><a href="../../files/vendor/bundle/ruby/2_6_0/gems/sdoc-1_0_0/spec/rdoc_generator_spec_rb.html">vendor/bundle/ruby/2.6.0/gems/sdoc-1.0.0/spec/rdoc_generator_spec.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>This is the driver for generating <a href="RDoc.html"><code>RDoc</code></a> output.  It handles file parsing and generation of output.</p>

<p>To use this class to generate <a href="RDoc.html"><code>RDoc</code></a> output via the API, the recommended way is:</p>

<pre><code>rdoc = RDoc::RDoc.new
options = rdoc.load_options # returns an RDoc::Options instance
# set extra options
rdoc.document options
</code></pre>

<p>You can also generate output like the <code>rdoc</code> executable:</p>

<pre><code>rdoc = RDoc::RDoc.new
rdoc.document argv
</code></pre>

<p>Where <code>argv</code> is an array of strings, each corresponding to an argument you&#39;d give rdoc on the command line.  See &lt;tt&gt;rdoc –help&lt;tt&gt; for details.</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-add_generator">add_generator</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-current">current</a>,
              </li>
            
              
              <li>
                <a href="#method-c-current-3D">current=</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-document">document</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-error">error</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>G</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-gather_files">gather_files</a>,
              </li>
            
              
              <li>
                <a href="#method-i-generate">generate</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>H</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-handle_pipe">handle_pipe</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-install_siginfo_handler">install_siginfo_handler</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>L</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-list_files_in_directory">list_files_in_directory</a>,
              </li>
            
              
              <li>
                <a href="#method-i-load_options">load_options</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-new">new</a>,
              </li>
            
              
              <li>
                <a href="#method-i-normalized_file_list">normalized_file_list</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>O</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-output_flag_file">output_flag_file</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-parse_dot_doc_file">parse_dot_doc_file</a>,
              </li>
            
              
              <li>
                <a href="#method-i-parse_file">parse_file</a>,
              </li>
            
              
              <li>
                <a href="#method-i-parse_files">parse_files</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-remove_siginfo_handler">remove_siginfo_handler</a>,
              </li>
            
              
              <li>
                <a href="#method-i-remove_unparseable">remove_unparseable</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-setup_output_dir">setup_output_dir</a>,
              </li>
            
              
              <li>
                <a href="#method-i-store-3D">store=</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>U</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-update_output_dir">update_output_dir</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    
      <!-- Section constants -->
      <div class="sectiontitle">Constants</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">GENERATORS</td>
            <td>=</td>
            <td class="attr-value">{}</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>This is the list of supported output generators</p></td>
            </tr>
          
        
      </table>
    


    
      <!-- Section attributes -->
      <div class="sectiontitle">Attributes</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>generator</td>
            <td class='attr-desc'><p>Generator instance used for creating output</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>last_modified</td>
            <td class='attr-desc'><p>Hash of files and their last modified times.</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>options</td>
            <td class='attr-desc'><p><a href="RDoc.html"><code>RDoc</code></a> options</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>stats</td>
            <td class='attr-desc'><p>Accessor for statistics.  Available after each call to <a href="RDoc.html#method-i-parse_files"><code>parse_files</code></a></p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>store</td>
            <td class='attr-desc'><p>The current documentation store</p></td>
          </tr>
        
      </table>
    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-add_generator">
            
              <b>add_generator</b>(klass)
            
            <a href="../../classes/RDoc/RDoc.html#method-c-add_generator" name="method-c-add_generator" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Add <code>klass</code> that can generate output after parsing</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-add_generator_source')" id="l_method-c-add_generator_source">show</a>
                
              </p>
              <div id="method-c-add_generator_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 66</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">add_generator</span>(<span class="ruby-identifier">klass</span>)
  <span class="ruby-identifier">name</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/^RDoc::Generator::/</span>, <span class="ruby-string">&#39;&#39;</span>).<span class="ruby-identifier">downcase</span>
  <span class="ruby-constant">GENERATORS</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">klass</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-current">
            
              <b>current</b>()
            
            <a href="../../classes/RDoc/RDoc.html#method-c-current" name="method-c-current" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Active <a href="RDoc.html"><code>RDoc::RDoc</code></a> instance</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-current_source')" id="l_method-c-current_source">show</a>
                
              </p>
              <div id="method-c-current_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 74</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">current</span>
  <span class="ruby-ivar">@current</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-current-3D">
            
              <b>current=</b>(rdoc)
            
            <a href="../../classes/RDoc/RDoc.html#method-c-current-3D" name="method-c-current-3D" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Sets the active <a href="RDoc.html"><code>RDoc::RDoc</code></a> instance</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-current-3D_source')" id="l_method-c-current-3D_source">show</a>
                
              </p>
              <div id="method-c-current-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 81</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">current=</span> <span class="ruby-identifier">rdoc</span>
  <span class="ruby-ivar">@current</span> = <span class="ruby-identifier">rdoc</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-new">
            
              <b>new</b>()
            
            <a href="../../classes/RDoc/RDoc.html#method-c-new" name="method-c-new" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Creates a new <a href="RDoc.html"><code>RDoc::RDoc</code></a> instance.  Call <a href="RDoc.html#method-i-document"><code>document</code></a> to parse files and generate documentation.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 89</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>
  <span class="ruby-ivar">@current</span>       = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@generator</span>     = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@last_modified</span> = {}
  <span class="ruby-ivar">@old_siginfo</span>   = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@options</span>       = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@stats</span>         = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@store</span>         = <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-document">
            
              <b>document</b>(options)
            
            <a href="../../classes/RDoc/RDoc.html#method-i-document" name="method-i-document" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Generates documentation or a coverage report depending upon the settings in <code>options</code>.</p>

<p><code>options</code> can be either an <a href="Options.html"><code>RDoc::Options</code></a> instance or an array of strings equivalent to the strings that would be passed on the command line like <code>%w[-q -o doc -t My\ Doc\ Title]</code>.  <a href="RDoc.html#method-i-document"><code>document</code></a> will automatically call <a href="Options.html#method-i-finish"><code>RDoc::Options#finish</code></a> if an options instance was given.</p>

<p>For a list of options, see either <a href="Options.html"><code>RDoc::Options</code></a> or <code>rdoc --help</code>.</p>

<p>By default, output will be stored in a directory called “doc” below the current directory, so make sure you&#39;re somewhere writable before invoking.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-document_source')" id="l_method-i-document_source">show</a>
                
              </p>
              <div id="method-i-document_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 453</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">document</span> <span class="ruby-identifier">options</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">store</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Store</span>.<span class="ruby-identifier">new</span>

  <span class="ruby-keyword">if</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Options</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">options</span> <span class="ruby-keyword">then</span>
    <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">options</span>
    <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">finish</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">load_options</span>
    <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">parse</span> <span class="ruby-identifier">options</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">pipe</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">handle_pipe</span>
    <span class="ruby-identifier">exit</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">coverage_report</span> <span class="ruby-keyword">then</span>
    <span class="ruby-ivar">@last_modified</span> = <span class="ruby-identifier">setup_output_dir</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">op_dir</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">force_update</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@store</span>.<span class="ruby-identifier">encoding</span> = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">encoding</span>
  <span class="ruby-ivar">@store</span>.<span class="ruby-identifier">dry_run</span>  = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">dry_run</span>
  <span class="ruby-ivar">@store</span>.<span class="ruby-identifier">main</span>     = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">main_page</span>
  <span class="ruby-ivar">@store</span>.<span class="ruby-identifier">title</span>    = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">title</span>
  <span class="ruby-ivar">@store</span>.<span class="ruby-identifier">path</span>     = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">op_dir</span>

  <span class="ruby-ivar">@start_time</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>

  <span class="ruby-ivar">@store</span>.<span class="ruby-identifier">load_cache</span>

  <span class="ruby-identifier">file_info</span> = <span class="ruby-identifier">parse_files</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">files</span>

  <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">default_title</span> = <span class="ruby-string">&quot;RDoc Documentation&quot;</span>

  <span class="ruby-ivar">@store</span>.<span class="ruby-identifier">complete</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">visibility</span>

  <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">coverage_level</span> = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">coverage_report</span>

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">coverage_report</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">puts</span>

    <span class="ruby-identifier">puts</span> <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">report</span>.<span class="ruby-identifier">accept</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Markup</span><span class="ruby-operator">::</span><span class="ruby-constant">ToRdoc</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">file_info</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;\nNo newer files.&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">quiet</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">gen_klass</span> = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">generator</span>

    <span class="ruby-ivar">@generator</span> = <span class="ruby-identifier">gen_klass</span>.<span class="ruby-identifier">new</span> <span class="ruby-ivar">@store</span>, <span class="ruby-ivar">@options</span>

    <span class="ruby-identifier">generate</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@stats</span> <span class="ruby-keyword">and</span> (<span class="ruby-ivar">@options</span>.<span class="ruby-identifier">coverage_report</span> <span class="ruby-keyword">or</span> <span class="ruby-keyword">not</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">quiet</span>) <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">puts</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">summary</span>.<span class="ruby-identifier">accept</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Markup</span><span class="ruby-operator">::</span><span class="ruby-constant">ToRdoc</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">exit</span> <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">fully_documented?</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">coverage_report</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-error">
            
              <b>error</b>(msg)
            
            <a href="../../classes/RDoc/RDoc.html#method-i-error" name="method-i-error" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Report an error message and exit</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-error_source')" id="l_method-i-error_source">show</a>
                
              </p>
              <div id="method-i-error_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 102</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">error</span>(<span class="ruby-identifier">msg</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-identifier">msg</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-gather_files">
            
              <b>gather_files</b>(files)
            
            <a href="../../classes/RDoc/RDoc.html#method-i-gather_files" name="method-i-gather_files" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Gathers a set of parseable files from the files and directories listed in <code>files</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-gather_files_source')" id="l_method-i-gather_files_source">show</a>
                
              </p>
              <div id="method-i-gather_files_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 110</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">gather_files</span> <span class="ruby-identifier">files</span>
  <span class="ruby-identifier">files</span> = [<span class="ruby-string">&quot;.&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">files</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">file_list</span> = <span class="ruby-identifier">normalized_file_list</span> <span class="ruby-identifier">files</span>, <span class="ruby-keyword">true</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">exclude</span>

  <span class="ruby-identifier">file_list</span> = <span class="ruby-identifier">file_list</span>.<span class="ruby-identifier">uniq</span>

  <span class="ruby-identifier">file_list</span> = <span class="ruby-identifier">remove_unparseable</span> <span class="ruby-identifier">file_list</span>

  <span class="ruby-identifier">file_list</span>.<span class="ruby-identifier">sort</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-generate">
            
              <b>generate</b>()
            
            <a href="../../classes/RDoc/RDoc.html#method-i-generate" name="method-i-generate" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Generates documentation for <code>file_info</code> (from <a href="RDoc.html#method-i-parse_files"><code>parse_files</code></a>) into the output dir using the generator selected by the <a href="RDoc.html"><code>RDoc</code></a> options</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-generate_source')" id="l_method-i-generate_source">show</a>
                
              </p>
              <div id="method-i-generate_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 518</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">generate</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">dry_run</span> <span class="ruby-keyword">then</span>
    <span class="ruby-comment"># do nothing</span>
    <span class="ruby-ivar">@generator</span>.<span class="ruby-identifier">generate</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">op_dir</span> <span class="ruby-keyword">do</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">quiet</span> <span class="ruby-keyword">then</span>
        <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;\nGenerating #{@generator.class.name.sub(/^.*::/, &#39;&#39;)} format into #{Dir.pwd}...&quot;</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-ivar">@generator</span>.<span class="ruby-identifier">generate</span>
      <span class="ruby-identifier">update_output_dir</span> <span class="ruby-string">&#39;.&#39;</span>, <span class="ruby-ivar">@start_time</span>, <span class="ruby-ivar">@last_modified</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-handle_pipe">
            
              <b>handle_pipe</b>()
            
            <a href="../../classes/RDoc/RDoc.html#method-i-handle_pipe" name="method-i-handle_pipe" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Turns <a href="RDoc.html"><code>RDoc</code></a> from stdin into HTML</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-handle_pipe_source')" id="l_method-i-handle_pipe_source">show</a>
                
              </p>
              <div id="method-i-handle_pipe_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 125</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">handle_pipe</span>
  <span class="ruby-ivar">@html</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Markup</span><span class="ruby-operator">::</span><span class="ruby-constant">ToHtml</span>.<span class="ruby-identifier">new</span> <span class="ruby-ivar">@options</span>

  <span class="ruby-identifier">parser</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Text</span><span class="ruby-operator">::</span><span class="ruby-constant">MARKUP_FORMAT</span>[<span class="ruby-ivar">@options</span>.<span class="ruby-identifier">markup</span>]

  <span class="ruby-identifier">document</span> = <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">parse</span> <span class="ruby-identifier">$stdin</span>.<span class="ruby-identifier">read</span>

  <span class="ruby-identifier">out</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">convert</span> <span class="ruby-identifier">document</span>

  <span class="ruby-identifier">$stdout</span>.<span class="ruby-identifier">write</span> <span class="ruby-identifier">out</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-install_siginfo_handler">
            
              <b>install_siginfo_handler</b>()
            
            <a href="../../classes/RDoc/RDoc.html#method-i-install_siginfo_handler" name="method-i-install_siginfo_handler" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Installs a siginfo handler that prints the current filename.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-install_siginfo_handler_source')" id="l_method-i-install_siginfo_handler_source">show</a>
                
              </p>
              <div id="method-i-install_siginfo_handler_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 140</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">install_siginfo_handler</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">Signal</span>.<span class="ruby-identifier">list</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">&#39;INFO&#39;</span>

  <span class="ruby-ivar">@old_siginfo</span> = <span class="ruby-identifier">trap</span> <span class="ruby-string">&#39;INFO&#39;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-ivar">@current</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@current</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-list_files_in_directory">
            
              <b>list_files_in_directory</b>(dir)
            
            <a href="../../classes/RDoc/RDoc.html#method-i-list_files_in_directory" name="method-i-list_files_in_directory" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Return a list of the files to be processed in a directory. We know that this directory doesn&#39;t have a .document file, so we&#39;re looking for real files. However we may well contain subdirectories which must be tested for .document files.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-list_files_in_directory_source')" id="l_method-i-list_files_in_directory_source">show</a>
                
              </p>
              <div id="method-i-list_files_in_directory_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 324</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">list_files_in_directory</span> <span class="ruby-identifier">dir</span>
  <span class="ruby-identifier">files</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-string">&quot;*&quot;</span>)

  <span class="ruby-identifier">normalized_file_list</span> <span class="ruby-identifier">files</span>, <span class="ruby-keyword">false</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">exclude</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-load_options">
            
              <b>load_options</b>()
            
            <a href="../../classes/RDoc/RDoc.html#method-i-load_options" name="method-i-load_options" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Loads options from .rdoc_options if the file exists, otherwise creates a new <a href="Options.html"><code>RDoc::Options</code></a> instance.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-load_options_source')" id="l_method-i-load_options_source">show</a>
                
              </p>
              <div id="method-i-load_options_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 152</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">load_options</span>
  <span class="ruby-identifier">options_file</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span> <span class="ruby-string">&#39;.rdoc_options&#39;</span>
  <span class="ruby-keyword">return</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Options</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">options_file</span>

  <span class="ruby-constant">RDoc</span>.<span class="ruby-identifier">load_yaml</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">options</span> = <span class="ruby-constant">YAML</span>.<span class="ruby-identifier">load_file</span> <span class="ruby-string">&#39;.rdoc_options&#39;</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Psych</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">raise</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;#{options_file} is not a valid rdoc options file&quot;</span> <span class="ruby-keyword">unless</span>
    <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Options</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">options</span>

  <span class="ruby-identifier">options</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-normalized_file_list">
            
              <b>normalized_file_list</b>(relative_files, force_doc = false, exclude_pattern = nil)
            
            <a href="../../classes/RDoc/RDoc.html#method-i-normalized_file_list" name="method-i-normalized_file_list" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Given a list of files and directories, create a list of all the Ruby files they contain.</p>

<p>If <code>force_doc</code> is true we always add the given files, if false, only add files that we guarantee we can parse.  It is true when looking at files given on the command line, false when recursing through subdirectories.</p>

<p>The effect of this is that if you want a file with a non-standard extension parsed, you must name it explicitly.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-normalized_file_list_source')" id="l_method-i-normalized_file_list_source">show</a>
                
              </p>
              <div id="method-i-normalized_file_list_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 279</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">normalized_file_list</span>(<span class="ruby-identifier">relative_files</span>, <span class="ruby-identifier">force_doc</span> = <span class="ruby-keyword">false</span>,
                         <span class="ruby-identifier">exclude_pattern</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">file_list</span> = []

  <span class="ruby-identifier">relative_files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">rel_file_name</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">rel_file_name</span>.<span class="ruby-identifier">end_with?</span> <span class="ruby-string">&#39;created.rid&#39;</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">exclude_pattern</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">exclude_pattern</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">rel_file_name</span>
    <span class="ruby-identifier">stat</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span> <span class="ruby-identifier">rel_file_name</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">next</span>

    <span class="ruby-keyword">case</span> <span class="ruby-identifier">type</span> = <span class="ruby-identifier">stat</span>.<span class="ruby-identifier">ftype</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;file&quot;</span> <span class="ruby-keyword">then</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">last_modified</span> = <span class="ruby-ivar">@last_modified</span>[<span class="ruby-identifier">rel_file_name</span>] <span class="ruby-keyword">and</span>
              <span class="ruby-identifier">stat</span>.<span class="ruby-identifier">mtime</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">last_modified</span>.<span class="ruby-identifier">to_i</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">force_doc</span> <span class="ruby-keyword">or</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">can_parse</span>(<span class="ruby-identifier">rel_file_name</span>) <span class="ruby-keyword">then</span>
        <span class="ruby-identifier">file_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">rel_file_name</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/^\.\//</span>, <span class="ruby-string">&#39;&#39;</span>)
        <span class="ruby-ivar">@last_modified</span>[<span class="ruby-identifier">rel_file_name</span>] = <span class="ruby-identifier">stat</span>.<span class="ruby-identifier">mtime</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;directory&quot;</span> <span class="ruby-keyword">then</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">rel_file_name</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;CVS&quot;</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">rel_file_name</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;.svn&quot;</span>

      <span class="ruby-identifier">created_rid</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">rel_file_name</span>, <span class="ruby-string">&quot;created.rid&quot;</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span> <span class="ruby-identifier">created_rid</span>

      <span class="ruby-identifier">dot_doc</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">rel_file_name</span>, <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">DOT_DOC_FILENAME</span>

      <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span> <span class="ruby-identifier">dot_doc</span> <span class="ruby-keyword">then</span>
        <span class="ruby-identifier">file_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">parse_dot_doc_file</span>(<span class="ruby-identifier">rel_file_name</span>, <span class="ruby-identifier">dot_doc</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">file_list</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">list_files_in_directory</span>(<span class="ruby-identifier">rel_file_name</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;rdoc can&#39;t parse the #{type} #{rel_file_name}&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">file_list</span>.<span class="ruby-identifier">flatten</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-output_flag_file">
            
              <b>output_flag_file</b>(op_dir)
            
            <a href="../../classes/RDoc/RDoc.html#method-i-output_flag_file" name="method-i-output_flag_file" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Return the path name of the flag file in an output directory.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-output_flag_file_source')" id="l_method-i-output_flag_file_source">show</a>
                
              </p>
              <div id="method-i-output_flag_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 244</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">output_flag_file</span>(<span class="ruby-identifier">op_dir</span>)
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">op_dir</span>, <span class="ruby-string">&quot;created.rid&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-parse_dot_doc_file">
            
              <b>parse_dot_doc_file</b>(in_dir, filename)
            
            <a href="../../classes/RDoc/RDoc.html#method-i-parse_dot_doc_file" name="method-i-parse_dot_doc_file" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>The .document file contains a list of file and directory name patterns, representing candidates for documentation. It may also contain comments (starting with &#39;#&#39;)</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-parse_dot_doc_file_source')" id="l_method-i-parse_dot_doc_file_source">show</a>
                
              </p>
              <div id="method-i-parse_dot_doc_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 253</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">parse_dot_doc_file</span> <span class="ruby-identifier">in_dir</span>, <span class="ruby-identifier">filename</span>
  <span class="ruby-comment"># read and strip comments</span>
  <span class="ruby-identifier">patterns</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">filename</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/#.*/</span>, <span class="ruby-string">&#39;&#39;</span>)

  <span class="ruby-identifier">result</span> = []

  <span class="ruby-identifier">patterns</span>.<span class="ruby-identifier">split</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">patt</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">candidates</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">glob</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">in_dir</span>, <span class="ruby-identifier">patt</span>))
    <span class="ruby-identifier">result</span>.<span class="ruby-identifier">concat</span> <span class="ruby-identifier">normalized_file_list</span>(<span class="ruby-identifier">candidates</span>, <span class="ruby-keyword">false</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">exclude</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-parse_file">
            
              <b>parse_file</b>(filename)
            
            <a href="../../classes/RDoc/RDoc.html#method-i-parse_file" name="method-i-parse_file" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Parses <code>filename</code> and returns an <a href="TopLevel.html"><code>RDoc::TopLevel</code></a></p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-parse_file_source')" id="l_method-i-parse_file_source">show</a>
                
              </p>
              <div id="method-i-parse_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 333</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">parse_file</span> <span class="ruby-identifier">filename</span>
    <span class="ruby-identifier">encoding</span> = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">encoding</span>
    <span class="ruby-identifier">filename</span> = <span class="ruby-identifier">filename</span>.<span class="ruby-identifier">encode</span> <span class="ruby-identifier">encoding</span>

    <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">add_file</span> <span class="ruby-identifier">filename</span>

    <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">binary?</span> <span class="ruby-identifier">filename</span>

    <span class="ruby-identifier">content</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Encoding</span>.<span class="ruby-identifier">read_file</span> <span class="ruby-identifier">filename</span>, <span class="ruby-identifier">encoding</span>

    <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">content</span>

    <span class="ruby-identifier">filename_path</span> = <span class="ruby-constant">Pathname</span>(<span class="ruby-identifier">filename</span>).<span class="ruby-identifier">expand_path</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">relative_path</span> = <span class="ruby-identifier">filename_path</span>.<span class="ruby-identifier">relative_path_from</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">root</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">ArgumentError</span>
      <span class="ruby-identifier">relative_path</span> = <span class="ruby-identifier">filename_path</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">page_dir</span> <span class="ruby-keyword">and</span>
       <span class="ruby-identifier">relative_path</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">start_with?</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">page_dir</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">relative_path</span> =
        <span class="ruby-identifier">relative_path</span>.<span class="ruby-identifier">relative_path_from</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">page_dir</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">top_level</span> = <span class="ruby-ivar">@store</span>.<span class="ruby-identifier">add_file</span> <span class="ruby-identifier">filename</span>, <span class="ruby-value">relative_name:</span> <span class="ruby-identifier">relative_path</span>.<span class="ruby-identifier">to_s</span>

    <span class="ruby-identifier">parser</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">for</span> <span class="ruby-identifier">top_level</span>, <span class="ruby-identifier">filename</span>, <span class="ruby-identifier">content</span>, <span class="ruby-ivar">@options</span>, <span class="ruby-ivar">@stats</span>

    <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">parser</span>

    <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">scan</span>

    <span class="ruby-comment"># restart documentation for the classes &amp; modules found</span>
    <span class="ruby-identifier">top_level</span>.<span class="ruby-identifier">classes_or_modules</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cm</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">cm</span>.<span class="ruby-identifier">done_documenting</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">top_level</span>

  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EACCES</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">&lt;&lt;-EOF</span>
<span class="ruby-value">Unable to read #{filename}, #{e.message}

Please check the permissions for this file.  Perhaps you do not have access to
it or perhaps the original author&#39;s permissions are to restrictive.  If the
this is not your library please report a bug to the author.
</span><span class="ruby-identifier">    EOF</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">&lt;&lt;-EOF</span>
<span class="ruby-value">Before reporting this, could you check that the file you&#39;re documenting
has proper syntax:

  #{Gem.ruby} -c #{filename}

RDoc is not a full Ruby parser and will fail when fed invalid ruby programs.

The internal error was:

\t(#{e.class}) #{e.message}

</span><span class="ruby-identifier">    EOF</span>

    <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n\t&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">$DEBUG_RDOC</span>

    <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span>
    <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-parse_files">
            
              <b>parse_files</b>(files)
            
            <a href="../../classes/RDoc/RDoc.html#method-i-parse_files" name="method-i-parse_files" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Parse each file on the command line, recursively entering directories.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-parse_files_source')" id="l_method-i-parse_files_source">show</a>
                
              </p>
              <div id="method-i-parse_files_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 405</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">parse_files</span> <span class="ruby-identifier">files</span>
  <span class="ruby-identifier">file_list</span> = <span class="ruby-identifier">gather_files</span> <span class="ruby-identifier">files</span>
  <span class="ruby-ivar">@stats</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Stats</span>.<span class="ruby-identifier">new</span> <span class="ruby-ivar">@store</span>, <span class="ruby-identifier">file_list</span>.<span class="ruby-identifier">length</span>, <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">verbosity</span>

  <span class="ruby-keyword">return</span> [] <span class="ruby-keyword">if</span> <span class="ruby-identifier">file_list</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">original_options</span> = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">begin_adding</span>

  <span class="ruby-identifier">file_info</span> = <span class="ruby-identifier">file_list</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">filename</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@current</span> = <span class="ruby-identifier">filename</span>
    <span class="ruby-identifier">parse_file</span> <span class="ruby-identifier">filename</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">compact</span>

  <span class="ruby-ivar">@stats</span>.<span class="ruby-identifier">done_adding</span>
  <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">original_options</span>

  <span class="ruby-identifier">file_info</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_siginfo_handler">
            
              <b>remove_siginfo_handler</b>()
            
            <a href="../../classes/RDoc/RDoc.html#method-i-remove_siginfo_handler" name="method-i-remove_siginfo_handler" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Removes a siginfo handler and replaces the previous</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-remove_siginfo_handler_source')" id="l_method-i-remove_siginfo_handler_source">show</a>
                
              </p>
              <div id="method-i-remove_siginfo_handler_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 537</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_siginfo_handler</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">Signal</span>.<span class="ruby-identifier">list</span>.<span class="ruby-identifier">key?</span> <span class="ruby-string">&#39;INFO&#39;</span>

  <span class="ruby-identifier">handler</span> = <span class="ruby-ivar">@old_siginfo</span> <span class="ruby-operator">||</span> <span class="ruby-string">&#39;DEFAULT&#39;</span>

  <span class="ruby-identifier">trap</span> <span class="ruby-string">&#39;INFO&#39;</span>, <span class="ruby-identifier">handler</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_unparseable">
            
              <b>remove_unparseable</b>(files)
            
            <a href="../../classes/RDoc/RDoc.html#method-i-remove_unparseable" name="method-i-remove_unparseable" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Removes file extensions known to be unparseable from <code>files</code> and TAGS files for emacs and vim.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-remove_unparseable_source')" id="l_method-i-remove_unparseable_source">show</a>
                
              </p>
              <div id="method-i-remove_unparseable_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 429</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_unparseable</span> <span class="ruby-identifier">files</span>
  <span class="ruby-identifier">files</span>.<span class="ruby-identifier">reject</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">file</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\.(?:class|eps|erb|scpt\.txt|svg|ttf|yml)$/i</span> <span class="ruby-keyword">or</span>
      (<span class="ruby-identifier">file</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/tags$/i</span> <span class="ruby-keyword">and</span>
       <span class="ruby-identifier">open</span>(<span class="ruby-identifier">file</span>, <span class="ruby-string">&#39;rb&#39;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
         <span class="ruby-identifier">io</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value">100</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\A(\f\n[^,]+,\d+$|!_TAG_)/</span>
       })
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-setup_output_dir">
            
              <b>setup_output_dir</b>(dir, force)
            
            <a href="../../classes/RDoc/RDoc.html#method-i-setup_output_dir" name="method-i-setup_output_dir" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Create an output dir if it doesn&#39;t exist. If it does exist, but doesn&#39;t contain the flag file <code>created.rid</code> then we refuse to use it, as we may clobber some manually generated documentation</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-setup_output_dir_source')" id="l_method-i-setup_output_dir_source">show</a>
                
              </p>
              <div id="method-i-setup_output_dir_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 174</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">setup_output_dir</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-identifier">force</span>)
    <span class="ruby-identifier">flag_file</span> = <span class="ruby-identifier">output_flag_file</span> <span class="ruby-identifier">dir</span>

    <span class="ruby-identifier">last</span> = {}

    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">dry_run</span> <span class="ruby-keyword">then</span>
      <span class="ruby-comment"># do nothing</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">dir</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">error</span> <span class="ruby-node">&quot;#{dir} exists and is not a directory&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span> <span class="ruby-identifier">dir</span>

      <span class="ruby-keyword">begin</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span> <span class="ruby-identifier">flag_file</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
          <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span> <span class="ruby-keyword">then</span>
            <span class="ruby-constant">Time</span>.<span class="ruby-identifier">parse</span> <span class="ruby-identifier">io</span>.<span class="ruby-identifier">gets</span>

            <span class="ruby-identifier">io</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
              <span class="ruby-identifier">file</span>, <span class="ruby-identifier">time</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span> <span class="ruby-string">&quot;\t&quot;</span>, <span class="ruby-value">2</span>
              <span class="ruby-identifier">time</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">time</span>) <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">next</span>
              <span class="ruby-identifier">last</span>[<span class="ruby-identifier">file</span>] = <span class="ruby-identifier">time</span>
            <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">SystemCallError</span>, <span class="ruby-constant">TypeError</span>
        <span class="ruby-identifier">error</span> <span class="ruby-identifier">&lt;&lt;-ERROR</span>
<span class="ruby-value">
Directory #{dir} already exists, but it looks like it isn&#39;t an RDoc directory.

Because RDoc doesn&#39;t want to risk destroying any of your existing files,
you&#39;ll need to specify a different output directory name (using the --op &lt;dir&gt;
option)

</span><span class="ruby-identifier">        ERROR</span>
      <span class="ruby-keyword">end</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">force_output</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span> <span class="ruby-identifier">dir</span>
      <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">touch</span> <span class="ruby-identifier">flag_file</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">last</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-store-3D">
            
              <b>store=</b>(store)
            
            <a href="../../classes/RDoc/RDoc.html#method-i-store-3D" name="method-i-store-3D" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Sets the current documentation tree to <code>store</code> and sets the store&#39;s rdoc driver to this instance.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-store-3D_source')" id="l_method-i-store-3D_source">show</a>
                
              </p>
              <div id="method-i-store-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 219</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">store=</span> <span class="ruby-identifier">store</span>
  <span class="ruby-ivar">@store</span> = <span class="ruby-identifier">store</span>
  <span class="ruby-ivar">@store</span>.<span class="ruby-identifier">rdoc</span> = <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-update_output_dir">
            
              <b>update_output_dir</b>(op_dir, time, last = {})
            
            <a href="../../classes/RDoc/RDoc.html#method-i-update_output_dir" name="method-i-update_output_dir" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Update the flag file in an output directory.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-update_output_dir_source')" id="l_method-i-update_output_dir_source">show</a>
                
              </p>
              <div id="method-i-update_output_dir_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/rdoc.rb, line 227</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">update_output_dir</span>(<span class="ruby-identifier">op_dir</span>, <span class="ruby-identifier">time</span>, <span class="ruby-identifier">last</span> = {})
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">dry_run</span> <span class="ruby-keyword">or</span> <span class="ruby-keyword">not</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">update_output_dir</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;SOURCE_DATE_EPOCH&#39;</span>].<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">time</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">at</span>(<span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;SOURCE_DATE_EPOCH&#39;</span>].<span class="ruby-identifier">to_i</span>).<span class="ruby-identifier">gmtime</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span> <span class="ruby-identifier">output_flag_file</span>(<span class="ruby-identifier">op_dir</span>), <span class="ruby-string">&quot;w&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">time</span>.<span class="ruby-identifier">rfc2822</span>
    <span class="ruby-identifier">last</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">n</span>, <span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{n}\t#{t.rfc2822}&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
  </body>
</html>
