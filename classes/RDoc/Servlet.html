<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>RDoc::Servlet</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>


    <meta property="og:title" value="RDoc::Servlet">

  
    
    <meta name="description" content="This is a WEBrick servlet that allows you to browse ri documentation.  You can show documentation through either `ri –server` or, with RubyGems 2.0 or newer, `gem server`.">
    <meta property="og:description" content="This is a WEBrick servlet that allows you to browse ri documentation.  You can show documentation through either `ri –server` or, with RubyGems 2.0 or newer, `gem server`.">
  

    <meta name="keywords" content="RDoc::Servlet class">
  
    <meta name="keywords" content="new, asset, do_GET, documentation_page, documentation_search, documentation_source, error, generator_for, if_modified_since, installed_docs, not_found, ri_paths, root, root_search, show_documentation, store_for">
  
</head>

<body>
    <div class="banner">
        
        <h1>
            <span class="type">Class</span>
            RDoc::Servlet
            
                <span class="parent">&lt;
                    
                    WEBrick::HTTPServlet::AbstractServlet
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/vendor/bundle/ruby/2_6_0/gems/rdoc-6_1_1/lib/rdoc/servlet_rb.html">vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/servlet.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>This is a WEBrick servlet that allows you to browse ri documentation.</p>

<p>You can show documentation through either `ri –server` or, with RubyGems 2.0 or newer, `gem server`.  For ri, the server runs on port 8214 by default.  For RubyGems the server runs on port 8808 by default.</p>

<p>You can use this servlet in your own project by mounting it on a WEBrick server:</p>

<pre><code>require &#39;webrick&#39;

server = WEBrick::HTTPServer.new Port: 8000

server.mount &#39;/&#39;, RDoc::Servlet
</code></pre>

<p>If you want to mount the servlet some other place than the root, provide the base path when mounting:</p>

<pre><code>server.mount &#39;/rdoc&#39;, RDoc::Servlet, &#39;/rdoc&#39;
</code></pre>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-asset">asset</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-do_GET">do_GET</a>,
              </li>
            
              
              <li>
                <a href="#method-i-documentation_page">documentation_page</a>,
              </li>
            
              
              <li>
                <a href="#method-i-documentation_search">documentation_search</a>,
              </li>
            
              
              <li>
                <a href="#method-i-documentation_source">documentation_source</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-error">error</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>G</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-generator_for">generator_for</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-if_modified_since">if_modified_since</a>,
              </li>
            
              
              <li>
                <a href="#method-i-installed_docs">installed_docs</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-new">new</a>,
              </li>
            
              
              <li>
                <a href="#method-i-not_found">not_found</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-ri_paths">ri_paths</a>,
              </li>
            
              
              <li>
                <a href="#method-i-root">root</a>,
              </li>
            
              
              <li>
                <a href="#method-i-root_search">root_search</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-show_documentation">show_documentation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-store_for">store_for</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    
      <!-- Section attributes -->
      <div class="sectiontitle">Attributes</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>asset_dirs</td>
            <td class='attr-desc'><p>Maps an asset type to its path on the filesystem</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>options</td>
            <td class='attr-desc'><p>An <a href="Options.html"><code>RDoc::Options</code></a> instance used for rendering options</p></td>
          </tr>
        
      </table>
    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-new">
            
              <b>new</b>(server, stores, cache, mount_path = nil, extra_doc_dirs = [])
            
            <a href="../../classes/RDoc/Servlet.html#method-c-new" name="method-c-new" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Creates a new WEBrick servlet.</p>

<p>Use <code>mount_path</code> when mounting the servlet somewhere other than /.</p>

<p>Use <code>extra_doc_dirs</code> for additional documentation directories.</p>

<p><code>server</code> is provided automatically by WEBrick when mounting.  <code>stores</code> and <code>cache</code> are provided automatically by the servlet.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/servlet.rb, line 64</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span> <span class="ruby-identifier">server</span>, <span class="ruby-identifier">stores</span>, <span class="ruby-identifier">cache</span>, <span class="ruby-identifier">mount_path</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">extra_doc_dirs</span> = []
  <span class="ruby-keyword">super</span> <span class="ruby-identifier">server</span>

  <span class="ruby-ivar">@cache</span>      = <span class="ruby-identifier">cache</span>
  <span class="ruby-ivar">@mount_path</span> = <span class="ruby-identifier">mount_path</span>
  <span class="ruby-ivar">@extra_doc_dirs</span> = <span class="ruby-identifier">extra_doc_dirs</span>
  <span class="ruby-ivar">@stores</span>     = <span class="ruby-identifier">stores</span>

  <span class="ruby-ivar">@options</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Options</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">op_dir</span> = <span class="ruby-string">&#39;.&#39;</span>

  <span class="ruby-identifier">darkfish_dir</span> = <span class="ruby-keyword">nil</span>

  <span class="ruby-comment"># HACK dup</span>
  <span class="ruby-identifier">$LOAD_PATH</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">darkfish_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">path</span>, <span class="ruby-string">&#39;rdoc/generator/template/darkfish/&#39;</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span> <span class="ruby-identifier">darkfish_dir</span>
    <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">template_dir</span> = <span class="ruby-identifier">darkfish_dir</span>
    <span class="ruby-keyword">break</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@asset_dirs</span> = {
    <span class="ruby-value">:darkfish</span>   <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">darkfish_dir</span>,
    <span class="ruby-value">:json_index</span> <span class="ruby-operator">=&gt;</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">&#39;../generator/template/json_index/&#39;</span>, <span class="ruby-keyword">__FILE__</span>),
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-asset">
            
              <b>asset</b>(generator_name, req, res)
            
            <a href="../../classes/RDoc/Servlet.html#method-i-asset" name="method-i-asset" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Serves the asset at the path in <code>req</code> for <code>generator_name</code> via <code>res</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-asset_source')" id="l_method-i-asset_source">show</a>
                
              </p>
              <div id="method-i-asset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/servlet.rb, line 95</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">asset</span> <span class="ruby-identifier">generator_name</span>, <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>
  <span class="ruby-identifier">asset_dir</span> = <span class="ruby-ivar">@asset_dirs</span>[<span class="ruby-identifier">generator_name</span>]

  <span class="ruby-identifier">asset_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span> <span class="ruby-identifier">asset_dir</span>, <span class="ruby-identifier">req</span>.<span class="ruby-identifier">path</span>

  <span class="ruby-identifier">if_modified_since</span> <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>, <span class="ruby-identifier">asset_path</span>

  <span class="ruby-identifier">res</span>.<span class="ruby-identifier">body</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span> <span class="ruby-identifier">asset_path</span>

  <span class="ruby-identifier">res</span>.<span class="ruby-identifier">content_type</span> = <span class="ruby-keyword">case</span> <span class="ruby-identifier">req</span>.<span class="ruby-identifier">path</span>
                     <span class="ruby-keyword">when</span> <span class="ruby-regexp">/css$/</span> <span class="ruby-keyword">then</span> <span class="ruby-string">&#39;text/css&#39;</span>
                     <span class="ruby-keyword">when</span> <span class="ruby-regexp">/js$/</span>  <span class="ruby-keyword">then</span> <span class="ruby-string">&#39;application/javascript&#39;</span>
                     <span class="ruby-keyword">else</span>             <span class="ruby-string">&#39;application/octet-stream&#39;</span>
                     <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-do_GET">
            
              <b>do_GET</b>(req, res)
            
            <a href="../../classes/RDoc/Servlet.html#method-i-do_GET" name="method-i-do_GET" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>GET request entry point.  Fills in <code>res</code> for the path, etc. in <code>req</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-do_GET_source')" id="l_method-i-do_GET_source">show</a>
                
              </p>
              <div id="method-i-do_GET_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/servlet.rb, line 114</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">do_GET</span> <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>
  <span class="ruby-identifier">req</span>.<span class="ruby-identifier">path</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp">/^#{Regexp.escape @mount_path}/o</span>, <span class="ruby-string">&#39;&#39;</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@mount_path</span>

  <span class="ruby-keyword">case</span> <span class="ruby-identifier">req</span>.<span class="ruby-identifier">path</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">root</span> <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;/js/darkfish.js&#39;</span>, <span class="ruby-string">&#39;/js/jquery.js&#39;</span>, <span class="ruby-string">&#39;/js/search.js&#39;</span>,
       <span class="ruby-regexp">%r%^/css/%</span>, <span class="ruby-regexp">%r%^/images/%</span>, <span class="ruby-regexp">%r%^/fonts/%</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">asset</span> <span class="ruby-value">:darkfish</span>, <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;/js/navigation.js&#39;</span>, <span class="ruby-string">&#39;/js/searcher.js&#39;</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">asset</span> <span class="ruby-value">:json_index</span>, <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;/js/search_index.js&#39;</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">root_search</span> <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">show_documentation</span> <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">WEBrick</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPStatus</span><span class="ruby-operator">::</span><span class="ruby-constant">NotFound</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-identifier">generator</span> = <span class="ruby-identifier">generator_for</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Store</span>.<span class="ruby-identifier">new</span>

  <span class="ruby-identifier">not_found</span> <span class="ruby-identifier">generator</span>, <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">WEBrick</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPStatus</span><span class="ruby-operator">::</span><span class="ruby-constant">Status</span>
  <span class="ruby-identifier">raise</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-identifier">error</span> <span class="ruby-identifier">e</span>, <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-documentation_page">
            
              <b>documentation_page</b>(store, generator, path, req, res)
            
            <a href="../../classes/RDoc/Servlet.html#method-i-documentation_page" name="method-i-documentation_page" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Fills in <code>res</code> with the class, module or page for <code>req</code> from <code>store</code>.</p>

<p><code>path</code> is relative to the mount_path and is used to determine the class, module or page name (/RDoc/Servlet.html becomes <a href="Servlet.html"><code>RDoc::Servlet</code></a>). <code>generator</code> is used to create the page.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-documentation_page_source')" id="l_method-i-documentation_page_source">show</a>
                
              </p>
              <div id="method-i-documentation_page_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/servlet.rb, line 147</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">documentation_page</span> <span class="ruby-identifier">store</span>, <span class="ruby-identifier">generator</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>
  <span class="ruby-identifier">name</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/.html$/</span>, <span class="ruby-string">&#39;&#39;</span>).<span class="ruby-identifier">gsub</span> <span class="ruby-string">&#39;/&#39;</span>, <span class="ruby-string">&#39;::&#39;</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">klass</span> = <span class="ruby-identifier">store</span>.<span class="ruby-identifier">find_class_or_module</span>(<span class="ruby-identifier">name</span>) <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">res</span>.<span class="ruby-identifier">body</span> = <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">generate_class</span> <span class="ruby-identifier">klass</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">page</span> = <span class="ruby-identifier">store</span>.<span class="ruby-identifier">find_text_page</span>(<span class="ruby-identifier">name</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/_([^_]*)$/</span>, <span class="ruby-string">&#39;.\1&#39;</span>)) <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">res</span>.<span class="ruby-identifier">body</span> = <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">generate_page</span> <span class="ruby-identifier">page</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">not_found</span> <span class="ruby-identifier">generator</span>, <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-documentation_search">
            
              <b>documentation_search</b>(store, generator, req, res)
            
            <a href="../../classes/RDoc/Servlet.html#method-i-documentation_search" name="method-i-documentation_search" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Creates the JSON search index on <code>res</code> for the given <code>store</code>.  <code>generator</code> must respond to #json_index to build.  <code>req</code> is ignored.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-documentation_search_source')" id="l_method-i-documentation_search_source">show</a>
                
              </p>
              <div id="method-i-documentation_search_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/servlet.rb, line 163</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">documentation_search</span> <span class="ruby-identifier">store</span>, <span class="ruby-identifier">generator</span>, <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>
  <span class="ruby-identifier">json_index</span> = <span class="ruby-ivar">@cache</span>[<span class="ruby-identifier">store</span>].<span class="ruby-identifier">fetch</span> <span class="ruby-value">:json_index</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@cache</span>[<span class="ruby-identifier">store</span>][<span class="ruby-value">:json_index</span>] =
      <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">dump</span> <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">json_index</span>.<span class="ruby-identifier">build_index</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">res</span>.<span class="ruby-identifier">content_type</span> = <span class="ruby-string">&#39;application/javascript&#39;</span>
  <span class="ruby-identifier">res</span>.<span class="ruby-identifier">body</span> = <span class="ruby-node">&quot;var search_data = #{json_index}&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-documentation_source">
            
              <b>documentation_source</b>(path)
            
            <a href="../../classes/RDoc/Servlet.html#method-i-documentation_source" name="method-i-documentation_source" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Returns the <a href="Store.html"><code>RDoc::Store</code></a> and path relative to <code>mount_path</code> for documentation at <code>path</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-documentation_source_source')" id="l_method-i-documentation_source_source">show</a>
                
              </p>
              <div id="method-i-documentation_source_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/servlet.rb, line 177</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">documentation_source</span> <span class="ruby-identifier">path</span>
  <span class="ruby-identifier">_</span>, <span class="ruby-identifier">source_name</span>, <span class="ruby-identifier">path</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">split</span> <span class="ruby-string">&#39;/&#39;</span>, <span class="ruby-value">3</span>

  <span class="ruby-identifier">store</span> = <span class="ruby-ivar">@stores</span>[<span class="ruby-identifier">source_name</span>]
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">store</span>, <span class="ruby-identifier">path</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">store</span>

  <span class="ruby-identifier">store</span> = <span class="ruby-identifier">store_for</span> <span class="ruby-identifier">source_name</span>

  <span class="ruby-identifier">store</span>.<span class="ruby-identifier">load_all</span>

  <span class="ruby-ivar">@stores</span>[<span class="ruby-identifier">source_name</span>] = <span class="ruby-identifier">store</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">store</span>, <span class="ruby-identifier">path</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-error">
            
              <b>error</b>(exception, req, res)
            
            <a href="../../classes/RDoc/Servlet.html#method-i-error" name="method-i-error" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Generates an error page for the <code>exception</code> while handling <code>req</code> on <code>res</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-error_source')" id="l_method-i-error_source">show</a>
                
              </p>
              <div id="method-i-error_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/servlet.rb, line 195</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">error</span> <span class="ruby-identifier">exception</span>, <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>
    <span class="ruby-identifier">backtrace</span> = <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">backtrace</span>.<span class="ruby-identifier">join</span> <span class="ruby-string">&quot;\n&quot;</span>

    <span class="ruby-identifier">res</span>.<span class="ruby-identifier">content_type</span> = <span class="ruby-string">&#39;text/html&#39;</span>
    <span class="ruby-identifier">res</span>.<span class="ruby-identifier">status</span> = <span class="ruby-value">500</span>
    <span class="ruby-identifier">res</span>.<span class="ruby-identifier">body</span> = <span class="ruby-identifier">&lt;&lt;-BODY</span>
<span class="ruby-value">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta content=&quot;text/html; charset=UTF-8&quot; http-equiv=&quot;Content-Type&quot;&gt;

&lt;title&gt;Error - #{ERB::Util.html_escape exception.class}&lt;/title&gt;

&lt;link type=&quot;text/css&quot; media=&quot;screen&quot; href=&quot;#{@mount_path}/css/rdoc.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Error&lt;/h1&gt;

&lt;p&gt;While processing &lt;code&gt;#{ERB::Util.html_escape req.request_uri}&lt;/code&gt; the
RDoc (#{ERB::Util.html_escape RDoc::VERSION}) server has encountered a
&lt;code&gt;#{ERB::Util.html_escape exception.class}&lt;/code&gt;
exception:

&lt;pre&gt;#{ERB::Util.html_escape exception.message}&lt;/pre&gt;

&lt;p&gt;Please report this to the
&lt;a href=&quot;https://github.com/ruby/rdoc/issues&quot;&gt;RDoc issues tracker&lt;/a&gt;.  Please
include the RDoc version, the URI above and exception class, message and
backtrace.  If you&#39;re viewing a gem&#39;s documentation, include the gem name and
version.  If you&#39;re viewing Ruby&#39;s documentation, include the version of ruby.

&lt;p&gt;Backtrace:

&lt;pre&gt;#{ERB::Util.html_escape backtrace}&lt;/pre&gt;

&lt;/body&gt;
&lt;/html&gt;
</span><span class="ruby-identifier">    BODY</span>
  <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-generator_for">
            
              <b>generator_for</b>(store)
            
            <a href="../../classes/RDoc/Servlet.html#method-i-generator_for" name="method-i-generator_for" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Instantiates a Darkfish generator for <code>store</code></p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-generator_for_source')" id="l_method-i-generator_for_source">show</a>
                
              </p>
              <div id="method-i-generator_for_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/servlet.rb, line 238</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">generator_for</span> <span class="ruby-identifier">store</span>
  <span class="ruby-identifier">generator</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Generator</span><span class="ruby-operator">::</span><span class="ruby-constant">Darkfish</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">store</span>, <span class="ruby-ivar">@options</span>
  <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">file_output</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">asset_rel_path</span> = <span class="ruby-string">&#39;..&#39;</span>

  <span class="ruby-identifier">rdoc</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">RDoc</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">rdoc</span>.<span class="ruby-identifier">store</span>     = <span class="ruby-identifier">store</span>
  <span class="ruby-identifier">rdoc</span>.<span class="ruby-identifier">generator</span> = <span class="ruby-identifier">generator</span>
  <span class="ruby-identifier">rdoc</span>.<span class="ruby-identifier">options</span>   = <span class="ruby-ivar">@options</span>

  <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">main_page</span> = <span class="ruby-identifier">store</span>.<span class="ruby-identifier">main</span>
  <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">title</span>     = <span class="ruby-identifier">store</span>.<span class="ruby-identifier">title</span>

  <span class="ruby-identifier">generator</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-if_modified_since">
            
              <b>if_modified_since</b>(req, res, path = nil)
            
            <a href="../../classes/RDoc/Servlet.html#method-i-if_modified_since" name="method-i-if_modified_since" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Handles the If-Modified-Since HTTP header on <code>req</code> for <code>path</code>.  If the file has not been modified a Not Modified response is returned.  If the file has been modified a Last-Modified header is added to <code>res</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-if_modified_since_source')" id="l_method-i-if_modified_since_source">show</a>
                
              </p>
              <div id="method-i-if_modified_since_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/servlet.rb, line 259</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">if_modified_since</span> <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>, <span class="ruby-identifier">path</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">last_modified</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">mtime</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">path</span>

  <span class="ruby-identifier">res</span>[<span class="ruby-string">&#39;last-modified&#39;</span>] = <span class="ruby-identifier">last_modified</span>.<span class="ruby-identifier">httpdate</span>

  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">ims</span> = <span class="ruby-identifier">req</span>[<span class="ruby-string">&#39;if-modified-since&#39;</span>]

  <span class="ruby-identifier">ims</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">parse</span> <span class="ruby-identifier">ims</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">ims</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">last_modified</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">res</span>.<span class="ruby-identifier">body</span> = <span class="ruby-string">&#39;&#39;</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">WEBrick</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPStatus</span><span class="ruby-operator">::</span><span class="ruby-constant">NotModified</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-installed_docs">
            
              <b>installed_docs</b>()
            
            <a href="../../classes/RDoc/Servlet.html#method-i-installed_docs" name="method-i-installed_docs" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Returns an <a href="../Array.html"><code>Array</code></a> of installed documentation.</p>

<p>Each entry contains the documentation name (gem name, &#39;Ruby Documentation&#39;, etc.), the path relative to the mount point, whether the documentation exists, the type of documentation (See RDoc::RI::Paths#each) and the filesystem to the <a href="Store.html"><code>RDoc::Store</code></a> for the documentation.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-installed_docs_source')" id="l_method-i-installed_docs_source">show</a>
                
              </p>
              <div id="method-i-installed_docs_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/servlet.rb, line 282</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">installed_docs</span>
  <span class="ruby-identifier">extra_counter</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">ri_paths</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span>, <span class="ruby-identifier">type</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">store</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Store</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">type</span>
    <span class="ruby-identifier">exists</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">store</span>.<span class="ruby-identifier">cache_path</span>

    <span class="ruby-keyword">case</span> <span class="ruby-identifier">type</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">:gem</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">gem_path</span> = <span class="ruby-identifier">path</span>[<span class="ruby-regexp">%r%/([^/]*)/ri$%</span>, <span class="ruby-value">1</span>]
      [<span class="ruby-identifier">gem_path</span>, <span class="ruby-node">&quot;#{gem_path}/&quot;</span>, <span class="ruby-identifier">exists</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">path</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-value">:system</span> <span class="ruby-keyword">then</span>
      [<span class="ruby-string">&#39;Ruby Documentation&#39;</span>, <span class="ruby-string">&#39;ruby/&#39;</span>, <span class="ruby-identifier">exists</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">path</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-value">:site</span> <span class="ruby-keyword">then</span>
      [<span class="ruby-string">&#39;Site Documentation&#39;</span>, <span class="ruby-string">&#39;site/&#39;</span>, <span class="ruby-identifier">exists</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">path</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-value">:home</span> <span class="ruby-keyword">then</span>
      [<span class="ruby-string">&#39;Home Documentation&#39;</span>, <span class="ruby-string">&#39;home/&#39;</span>, <span class="ruby-identifier">exists</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">path</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-value">:extra</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">extra_counter</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">store</span>.<span class="ruby-identifier">load_cache</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">exists</span>
      <span class="ruby-identifier">title</span> = <span class="ruby-identifier">store</span>.<span class="ruby-identifier">title</span> <span class="ruby-operator">||</span> <span class="ruby-string">&quot;Extra Documentation&quot;</span>
      [<span class="ruby-identifier">title</span>, <span class="ruby-node">&quot;extra-#{extra_counter}/&quot;</span>, <span class="ruby-identifier">exists</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">path</span>]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-not_found">
            
              <b>not_found</b>(generator, req, res, message = nil)
            
            <a href="../../classes/RDoc/Servlet.html#method-i-not_found" name="method-i-not_found" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Returns a 404 page built by <code>generator</code> for <code>req</code> on <code>res</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-not_found_source')" id="l_method-i-not_found_source">show</a>
                
              </p>
              <div id="method-i-not_found_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/servlet.rb, line 310</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">not_found</span> <span class="ruby-identifier">generator</span>, <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>, <span class="ruby-identifier">message</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">message</span> <span class="ruby-operator">||=</span> <span class="ruby-node">&quot;The page &lt;kbd&gt;#{ERB::Util.h req.path}&lt;/kbd&gt; was not found&quot;</span>
  <span class="ruby-identifier">res</span>.<span class="ruby-identifier">body</span> = <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">generate_servlet_not_found</span> <span class="ruby-identifier">message</span>
  <span class="ruby-identifier">res</span>.<span class="ruby-identifier">status</span> = <span class="ruby-value">404</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-ri_paths">
            
              <b>ri_paths</b>(&amp;block)
            
            <a href="../../classes/RDoc/Servlet.html#method-i-ri_paths" name="method-i-ri_paths" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Enumerates the ri paths.  See RDoc::RI::Paths#each</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-ri_paths_source')" id="l_method-i-ri_paths_source">show</a>
                
              </p>
              <div id="method-i-ri_paths_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/servlet.rb, line 319</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ri_paths</span> <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
  <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">RI</span><span class="ruby-operator">::</span><span class="ruby-constant">Paths</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">true</span>, <span class="ruby-keyword">true</span>, <span class="ruby-keyword">true</span>, <span class="ruby-value">:all</span>, <span class="ruby-operator">*</span><span class="ruby-ivar">@extra_doc_dirs</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span> <span class="ruby-comment">#TODO: pass extra_dirs</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-root">
            
              <b>root</b>(req, res)
            
            <a href="../../classes/RDoc/Servlet.html#method-i-root" name="method-i-root" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Generates the root page on <code>res</code>.  <code>req</code> is ignored.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-root_source')" id="l_method-i-root_source">show</a>
                
              </p>
              <div id="method-i-root_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/servlet.rb, line 326</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">root</span> <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>
  <span class="ruby-identifier">generator</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Generator</span><span class="ruby-operator">::</span><span class="ruby-constant">Darkfish</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@options</span>

  <span class="ruby-identifier">res</span>.<span class="ruby-identifier">body</span> = <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">generate_servlet_root</span> <span class="ruby-identifier">installed_docs</span>

  <span class="ruby-identifier">res</span>.<span class="ruby-identifier">content_type</span> = <span class="ruby-string">&#39;text/html&#39;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-root_search">
            
              <b>root_search</b>(req, res)
            
            <a href="../../classes/RDoc/Servlet.html#method-i-root_search" name="method-i-root_search" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Generates a search index for the root page on <code>res</code>.  <code>req</code> is ignored.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-root_search_source')" id="l_method-i-root_search_source">show</a>
                
              </p>
              <div id="method-i-root_search_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/servlet.rb, line 337</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">root_search</span> <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>
  <span class="ruby-identifier">search_index</span> = []
  <span class="ruby-identifier">info</span>         = []

  <span class="ruby-identifier">installed_docs</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">href</span>, <span class="ruby-identifier">exists</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">exists</span>

    <span class="ruby-identifier">search_index</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>

    <span class="ruby-keyword">case</span> <span class="ruby-identifier">type</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">:gem</span>
      <span class="ruby-identifier">gemspec</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r%/doc/([^/]*?)/ri$%</span>,
                          <span class="ruby-string">&#39;/specifications/\1.gemspec&#39;</span>)

      <span class="ruby-identifier">spec</span> = <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Specification</span>.<span class="ruby-identifier">load</span> <span class="ruby-identifier">gemspec</span>

      <span class="ruby-identifier">path</span>    = <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">full_name</span>
      <span class="ruby-identifier">comment</span> = <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">summary</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">:system</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">path</span>    = <span class="ruby-string">&#39;ruby&#39;</span>
      <span class="ruby-identifier">comment</span> = <span class="ruby-string">&#39;Documentation for the Ruby standard library&#39;</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">:site</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">path</span>    = <span class="ruby-string">&#39;site&#39;</span>
      <span class="ruby-identifier">comment</span> = <span class="ruby-string">&#39;Documentation for non-gem libraries&#39;</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">:home</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">path</span>    = <span class="ruby-string">&#39;home&#39;</span>
      <span class="ruby-identifier">comment</span> = <span class="ruby-string">&#39;Documentation from your home directory&#39;</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">:extra</span>
      <span class="ruby-identifier">comment</span> = <span class="ruby-identifier">name</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">info</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">name</span>, <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-identifier">path</span>, <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-identifier">comment</span>]
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">index</span> = {
    <span class="ruby-value">:index</span> <span class="ruby-operator">=&gt;</span> {
      <span class="ruby-value">:searchIndex</span>     <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">search_index</span>,
      <span class="ruby-value">:longSearchIndex</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">search_index</span>,
      <span class="ruby-value">:info</span>            <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">info</span>,
    }
  }

  <span class="ruby-identifier">res</span>.<span class="ruby-identifier">body</span> = <span class="ruby-node">&quot;var search_data = #{JSON.dump index};&quot;</span>
  <span class="ruby-identifier">res</span>.<span class="ruby-identifier">content_type</span> = <span class="ruby-string">&#39;application/javascript&#39;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-show_documentation">
            
              <b>show_documentation</b>(req, res)
            
            <a href="../../classes/RDoc/Servlet.html#method-i-show_documentation" name="method-i-show_documentation" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Displays documentation for <code>req</code> on <code>res</code>, whether that be HTML or some asset.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-show_documentation_source')" id="l_method-i-show_documentation_source">show</a>
                
              </p>
              <div id="method-i-show_documentation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/servlet.rb, line 387</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">show_documentation</span> <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>
  <span class="ruby-identifier">store</span>, <span class="ruby-identifier">path</span> = <span class="ruby-identifier">documentation_source</span> <span class="ruby-identifier">req</span>.<span class="ruby-identifier">path</span>

  <span class="ruby-identifier">if_modified_since</span> <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>, <span class="ruby-identifier">store</span>.<span class="ruby-identifier">cache_path</span>

  <span class="ruby-identifier">generator</span> = <span class="ruby-identifier">generator_for</span> <span class="ruby-identifier">store</span>

  <span class="ruby-keyword">case</span> <span class="ruby-identifier">path</span>
  <span class="ruby-keyword">when</span> <span class="ruby-keyword">nil</span>, <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-string">&#39;index.html&#39;</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">res</span>.<span class="ruby-identifier">body</span> = <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">generate_index</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;table_of_contents.html&#39;</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">res</span>.<span class="ruby-identifier">body</span> = <span class="ruby-identifier">generator</span>.<span class="ruby-identifier">generate_table_of_contents</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;js/search_index.js&#39;</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">documentation_search</span> <span class="ruby-identifier">store</span>, <span class="ruby-identifier">generator</span>, <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">documentation_page</span> <span class="ruby-identifier">store</span>, <span class="ruby-identifier">generator</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-identifier">res</span>.<span class="ruby-identifier">content_type</span> <span class="ruby-operator">||=</span> <span class="ruby-string">&#39;text/html&#39;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-store_for">
            
              <b>store_for</b>(source_name)
            
            <a href="../../classes/RDoc/Servlet.html#method-i-store_for" name="method-i-store_for" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Returns an <a href="Store.html"><code>RDoc::Store</code></a> for the given <code>source_name</code> (&#39;ruby&#39; or a gem name).</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-store_for_source')" id="l_method-i-store_for_source">show</a>
                
              </p>
              <div id="method-i-store_for_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rdoc-6.1.1/lib/rdoc/servlet.rb, line 411</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">store_for</span> <span class="ruby-identifier">source_name</span>
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">source_name</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;home&#39;</span> <span class="ruby-keyword">then</span>
    <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Store</span>.<span class="ruby-identifier">new</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">RI</span><span class="ruby-operator">::</span><span class="ruby-constant">Paths</span>.<span class="ruby-identifier">home_dir</span>, <span class="ruby-value">:home</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;ruby&#39;</span> <span class="ruby-keyword">then</span>
    <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Store</span>.<span class="ruby-identifier">new</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">RI</span><span class="ruby-operator">::</span><span class="ruby-constant">Paths</span>.<span class="ruby-identifier">system_dir</span>, <span class="ruby-value">:system</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;site&#39;</span> <span class="ruby-keyword">then</span>
    <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Store</span>.<span class="ruby-identifier">new</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">RI</span><span class="ruby-operator">::</span><span class="ruby-constant">Paths</span>.<span class="ruby-identifier">site_dir</span>, <span class="ruby-value">:site</span>
  <span class="ruby-keyword">when</span> <span class="ruby-regexp">/^extra-(\d+)$/</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">index</span> = <span class="ruby-node">$1</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">ri_dir</span> = <span class="ruby-identifier">installed_docs</span>[<span class="ruby-identifier">index</span>][<span class="ruby-value">4</span>]
    <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Store</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">ri_dir</span>, <span class="ruby-value">:extra</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">ri_dir</span>, <span class="ruby-identifier">type</span> = <span class="ruby-identifier">ri_paths</span>.<span class="ruby-identifier">find</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span>, <span class="ruby-identifier">dir_type</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">dir_type</span> <span class="ruby-operator">==</span> <span class="ruby-value">:gem</span>

      <span class="ruby-identifier">source_name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">dir</span>[<span class="ruby-regexp">%r%/([^/]*)/ri$%</span>, <span class="ruby-value">1</span>]
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">raise</span> <span class="ruby-constant">WEBrick</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPStatus</span><span class="ruby-operator">::</span><span class="ruby-constant">NotFound</span>,
          <span class="ruby-node">&quot;Could not find gem \&quot;#{ERB::Util.html_escape(source_name)}\&quot;. Are you sure you installed it?&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">ri_dir</span>

    <span class="ruby-identifier">store</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Store</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">ri_dir</span>, <span class="ruby-identifier">type</span>

    <span class="ruby-keyword">return</span> <span class="ruby-identifier">store</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-identifier">store</span>.<span class="ruby-identifier">cache_path</span>

    <span class="ruby-identifier">raise</span> <span class="ruby-constant">WEBrick</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPStatus</span><span class="ruby-operator">::</span><span class="ruby-constant">NotFound</span>,
          <span class="ruby-node">&quot;Could not find documentation for \&quot;#{ERB::Util.html_escape(source_name)}\&quot;. Please run `gem rdoc --ri gem_name`&quot;</span>

  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
  </body>
</html>
