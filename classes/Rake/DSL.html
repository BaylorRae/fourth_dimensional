<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Rake::DSL</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>


    <meta property="og:title" value="Rake::DSL">

  
    
    <meta name="description" content="DSL is a module that provides task, desc, namespace, etc.  Use this when you&#39;d like to use rake outside the top level scope.">
    <meta property="og:description" content="DSL is a module that provides task, desc, namespace, etc.  Use this when you&#39;d like to use rake outside the top level scope.">
  

    <meta name="keywords" content="Rake::DSL class">
  
    <meta name="keywords" content="task, file, directory, multitask, namespace, rule, desc, import">
  
</head>

<body>
    <div class="banner">
        
        <h1>
            <span class="type">Module</span>
            Rake::DSL
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/vendor/bundle/ruby/2_6_0/gems/rake-10_5_0/lib/rake/dsl_definition_rb.html">vendor/bundle/ruby/2.6.0/gems/rake-10.5.0/lib/rake/dsl_definition.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p><a href="DSL.html"><code>DSL</code></a> is a module that provides <a href="DSL.html#method-i-task"><code>task</code></a>, <a href="DSL.html#method-i-desc"><code>desc</code></a>, <a href="DSL.html#method-i-namespace"><code>namespace</code></a>, etc.  Use this when you&#39;d like to use rake outside the top level scope.</p>

<p>For a <a href="../../files/Rakefile.html">Rakefile</a> you run from the command line this module is automatically included.</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-desc">desc</a>,
              </li>
            
              
              <li>
                <a href="#method-i-directory">directory</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>F</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-file">file</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-import">import</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>M</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-multitask">multitask</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-namespace">namespace</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-rule">rule</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-task">task</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  
    <!-- Includes -->
    <div class="sectiontitle">Included Modules</div>
    <ul>
      
        <li>
          
            <a href="FileUtilsExt.html">
              Rake::FileUtilsExt
            </a>
          
        </li>
      
    </ul>
  



  

    

    

    


    


    <!-- Methods -->
    
    
      <div class="sectiontitle">Instance Private methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-desc">
            
              <b>desc</b>(description)
            
            <a href="../../classes/Rake/DSL.html#method-i-desc" name="method-i-desc" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Describes the next rake task.  Duplicate descriptions are discarded. Descriptions are shown with <code>rake -T</code> (up to the first sentence) and <code>rake -D</code> (the entire description).</p>

<p>Example:</p>

<pre><code>desc &quot;Run the Unit Tests&quot;
task test: [:build]
  # ... run tests
end
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-desc_source')" id="l_method-i-desc_source">show</a>
                
              </p>
              <div id="method-i-desc_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rake-10.5.0/lib/rake/dsl_definition.rb, line 171</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">desc</span>(<span class="ruby-identifier">description</span>) <span class="ruby-comment"># :doc:</span>
  <span class="ruby-constant">Rake</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">last_description</span> = <span class="ruby-identifier">description</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-directory">
            
              <b>directory</b>(*args, &amp;block)
            
            <a href="../../classes/Rake/DSL.html#method-i-directory" name="method-i-directory" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Declare a set of files tasks to create the given directories on demand.</p>

<p>Example:</p>

<pre><code>directory &quot;testdata/doc&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-directory_source')" id="l_method-i-directory_source">show</a>
                
              </p>
              <div id="method-i-directory_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rake-10.5.0/lib/rake/dsl_definition.rb, line 98</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">directory</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment"># :doc:</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-identifier">file_create</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">_</span> = <span class="ruby-operator">*</span><span class="ruby-constant">Rake</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">resolve_args</span>(<span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">dir</span> = <span class="ruby-constant">Rake</span>.<span class="ruby-identifier">from_pathname</span>(<span class="ruby-identifier">dir</span>)
  <span class="ruby-constant">Rake</span>.<span class="ruby-identifier">each_dir_parent</span>(<span class="ruby-identifier">dir</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">file_create</span> <span class="ruby-identifier">d</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">mkdir_p</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">name</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">t</span>.<span class="ruby-identifier">name</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-file">
            
              <b>file</b>(*args, &amp;block)
            
            <a href="../../classes/Rake/DSL.html#method-i-file" name="method-i-file" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Declare a file task.</p>

<p>Example:</p>

<pre><code> file &quot;config.cfg&quot; =&gt; [&quot;config.template&quot;] do
   open(&quot;config.cfg&quot;, &quot;w&quot;) do |outfile|
     open(&quot;config.template&quot;) do |infile|
       while line = infile.gets
         outfile.puts line
       end
     end
   end
end
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-file_source')" id="l_method-i-file_source">show</a>
                
              </p>
              <div id="method-i-file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rake-10.5.0/lib/rake/dsl_definition.rb, line 82</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">file</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment"># :doc:</span>
  <span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">FileTask</span>.<span class="ruby-identifier">define_task</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-import">
            
              <b>import</b>(*fns)
            
            <a href="../../classes/Rake/DSL.html#method-i-import" name="method-i-import" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Import the partial Rakefiles <code>fn</code>.  Imported files are loaded <em>after</em> the current file is completely loaded.  This allows the import statement to appear anywhere in the importing file, and yet allowing the imported files to depend on objects defined in the importing file.</p>

<p>A common use of the import statement is to include files containing dependency declarations.</p>

<p>See also the –rakelibdir command line option.</p>

<p>Example:</p>

<pre><code>import &quot;.depend&quot;, &quot;my_rules&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-import_source')" id="l_method-i-import_source">show</a>
                
              </p>
              <div id="method-i-import_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rake-10.5.0/lib/rake/dsl_definition.rb, line 189</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">import</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">fns</span>) <span class="ruby-comment"># :doc:</span>
  <span class="ruby-identifier">fns</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">fn</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Rake</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">add_import</span>(<span class="ruby-identifier">fn</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-multitask">
            
              <b>multitask</b>(*args, &amp;block)
            
            <a href="../../classes/Rake/DSL.html#method-i-multitask" name="method-i-multitask" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Declare a task that performs its prerequisites in parallel. Multitasks does <strong>not</strong> guarantee that its prerequisites will execute in any given order (which is obvious when you think about it)</p>

<p>Example:</p>

<pre><code>multitask deploy: %w[deploy_gem deploy_rdoc]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-multitask_source')" id="l_method-i-multitask_source">show</a>
                
              </p>
              <div id="method-i-multitask_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rake-10.5.0/lib/rake/dsl_definition.rb, line 118</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">multitask</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment"># :doc:</span>
  <span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">MultiTask</span>.<span class="ruby-identifier">define_task</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-namespace">
            
              <b>namespace</b>(name=nil, &amp;block)
            
            <a href="../../classes/Rake/DSL.html#method-i-namespace" name="method-i-namespace" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Create a new rake namespace and use it for evaluating the given block.  Returns a <a href="NameSpace.html"><code>NameSpace</code></a> object that can be used to lookup tasks defined in the namespace.</p>

<p>Example:</p>

<pre><code>ns = namespace &quot;nested&quot; do
  # the &quot;nested:run&quot; task
  task :run
end
task_run = ns[:run] # find :run in the given namespace.
</code></pre>

<p>Tasks can also be defined in a namespace by using a “:” in the task name:</p>

<pre><code>task &quot;nested:test&quot; do
  # ...
end
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-namespace_source')" id="l_method-i-namespace_source">show</a>
                
              </p>
              <div id="method-i-namespace_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rake-10.5.0/lib/rake/dsl_definition.rb, line 141</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">namespace</span>(<span class="ruby-identifier">name</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment"># :doc:</span>
  <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Symbol</span>)
  <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_str</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:to_str</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Expected a String or Symbol for a namespace name&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">Rake</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">in_namespace</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-rule">
            
              <b>rule</b>(*args, &amp;block)
            
            <a href="../../classes/Rake/DSL.html#method-i-rule" name="method-i-rule" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Declare a rule for auto-tasks.</p>

<p>Example:</p>

<pre><code>rule &#39;.o&#39; =&gt; &#39;.c&#39; do |t|
  sh &#39;cc&#39;, &#39;-o&#39;, t.name, t.source
end
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-rule_source')" id="l_method-i-rule_source">show</a>
                
              </p>
              <div id="method-i-rule_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rake-10.5.0/lib/rake/dsl_definition.rb, line 157</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rule</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment"># :doc:</span>
  <span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">Task</span>.<span class="ruby-identifier">create_rule</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-task">
            
              <b>task task_name<br />task task_name: dependencies<br />task task_name, arguments => dependencies<br />task task_name, argument[, argument ...], :needs: dependencies
</b>
            
            <a href="../../classes/Rake/DSL.html#method-i-task" name="method-i-task" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Declare a basic task.  The <code>task_name</code> is always the first argument.  If the task name contains a “:” it is defined in that namespace.</p>

<p>The <code>dependencies</code> may be a single task name or an <a href="../Array.html"><code>Array</code></a> of task names. The <code>argument</code> (a single name) or <code>arguments</code> (an <a href="../Array.html"><code>Array</code></a> of names) define the arguments provided to the task.</p>

<p>The task, argument and dependency names may be either symbols or strings.</p>

<p>A task with a single dependency:</p>

<pre><code>task clobber: %w[clean] do
  rm_rf &quot;html&quot;
end
</code></pre>

<p>A task with an argument and a dependency:</p>

<pre><code>task :package, [:version] =&gt; :test do |t, args|
  # ...
end
</code></pre>

<p>To invoke this task from the command line:</p>

<pre><code>$ rake package[1.2.3]
</code></pre>

<p>Alternate definition:</p>

<pre><code>task :package, :version, needs: :test do |t, args|
  # ...
end
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-task_source')" id="l_method-i-task_source">show</a>
                
              </p>
              <div id="method-i-task_source" class="dyn-source">
                <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.6.0/gems/rake-10.5.0/lib/rake/dsl_definition.rb, line 65</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">task</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment"># :doc:</span>
  <span class="ruby-constant">Rake</span><span class="ruby-operator">::</span><span class="ruby-constant">Task</span>.<span class="ruby-identifier">define_task</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
  </body>
</html>
